(()=>{"use strict";function t(t,e){var n=function(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}(t,e);return function(t,e){return e.get?e.get.call(t):e.value}(t,n)}function e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function a(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?r(Object(i),!0).forEach((function(n){e(t,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function c(t,e){l(t,e),e.add(t)}function l(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function h(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}!function(){var e=window.location.search.includes("_rmb_debug"),i=function(t){e&&console.log.apply(null,["[RMB debug]:",t])},r=new WeakSet,d=function(){function t(e){var o=this;switch(n(this,t),c(this,r),this.settings={global:{selector:"#read-more-content-wrapper",hideSelector:null,matchMedia:"screen",text:"Read More",loadEvent:null},desktop:{fontSize:"16px",color:"#326891",background:"#EDF2F5",lineHeight:1.4,fontWeight:400,textAlign:"center",textTransform:"uppercase",border:"1px solid #326891",borderRadius:"5px",padding:"10px 100px",height:"300px",zIndex:200}},this.settings.global=Object.assign(this.settings.global,(null==e?void 0:e.global)||{}),this.settings.desktop=Object.assign(this.settings.desktop,(null==e?void 0:e.desktop)||{}),this.settings.mobile=a(a({},this.settings.desktop),{},{media:"@media (max-width: 768px)"}),this.settings.mobile=Object.assign(this.settings.mobile,(null==e?void 0:e.mobile)||{}),this.settings.global.loadEvent){case"load":i("Event: load"),"complete"===document.readyState?this.init():window.addEventListener(this.settings.global.loadEvent,(function(){o.init()}));break;case"DOMContentLoaded":i("Event: DOMContentLoaded"),"interactive"===document.readyState?this.init():window.addEventListener(this.settings.global.loadEvent,(function(){o.init()}));break;default:i("Event: instant"),this.init()}}return o(t,[{key:"init",value:function(){h(this,r,u).call(this),this.buttons=[],this.addButtons(document.querySelectorAll(this.settings.global.selector)),i("Add listener"),this.hostListener()}},{key:"hostListener",value:function(){var t=this;this.hostObserver=new MutationObserver((function(e){e.forEach((function(e){e.addedNodes.forEach((function(e){e instanceof Element&&(e.matches(t.settings.global.selector)&&t.addButtons([e]),t.addButtons(e.querySelectorAll(t.settings.global.selector)))}))}))})),this.hostObserver.observe(document,{attributes:!1,childList:!0,subtree:!0})}},{key:"addButtons",value:function(t){var e=this;t.length&&this.buttons.push(Array.from(t,(function(t){return new y(t,e.settings)})))}}]),t}();function u(){var t="".concat(this.settings.global.selector," { visibility: hidden; height: 1px; overflow: hidden; opacity: 0; } .widget-btn { position: absolute; left: 50%; transform: translateX(-50%); bottom: 40px; display: block; margin: 0 auto; padding: ").concat(this.settings.desktop.padding,"; font-size: ").concat(this.settings.desktop.fontSize,"; font-weight: ").concat(this.settings.desktop.fontWeight,"; line-height: ").concat(this.settings.desktop.lineHeight,"; text-align: ").concat(this.settings.desktop.textAlign,"; color: ").concat(this.settings.desktop.color,"; text-transform: ").concat(this.settings.desktop.textTransform,"; background: ").concat(this.settings.desktop.background,"; cursor: pointer; transition: all 0.2s; border: ").concat(this.settings.desktop.border,"; border-radius: ").concat(this.settings.desktop.borderRadius,"; z-index: ").concat(this.settings.desktop.zIndex,"; } .widget-btn.hide { display: none; } .clipped-content { position: relative; max-height: ").concat(this.settings.desktop.height,"; overflow: hidden; }  .clipped-content:before { position: absolute; bottom: 0; left: 0; right: 0; width: 100%; height: 250px; background: linear-gradient(to top, #fff 40%, rgba(255, 255, 255, 0)); content: ''; z-index: 100; } .widget-wrap { position: relative; } ").concat(this.settings.global.selector,".visible-content { visibility: visible; height: auto; opacity: 1; }"),e="".concat(this.settings.mobile.media," { .widget-btn { padding: ").concat(this.settings.mobile.padding,"; font-size: ").concat(this.settings.mobile.fontSize,"; font-weight: ").concat(this.settings.mobile.fontWeight,"; line-height: ").concat(this.settings.mobile.lineHeight,"; text-align: ").concat(this.settings.mobile.textAlign,"; color: ").concat(this.settings.mobile.color,"; text-transform: ").concat(this.settings.mobile.textTransform,"; background: ").concat(this.settings.mobile.background,"; border: ").concat(this.settings.mobile.border,"; border-radius: ").concat(this.settings.mobile.borderRadius,"; z-index: ").concat(this.settings.mobile.zIndex,"; } .clipped-content { max-height: ").concat(this.settings.mobile.height,"; } }");this.styles="".concat(t," ").concat(e),this.styleSheet=document.createElement("style"),this.styleSheet.innerText=this.styles,document.head.appendChild(this.styleSheet)}var g=new WeakSet,b=new WeakMap,f=new WeakSet,p=new WeakSet,m=new WeakSet,v=new WeakSet,y=function(){function e(o,s){var r,a,d=this;n(this,e),c(this,v),c(this,m),c(this,p),c(this,f),c(this,g),r=b,a={writable:!0,value:h(this,g,w).bind(this)},l(this,r),r.set(this,a),i("Creating RMB for:"),i(o),this.host=o,this.opts=s,this.hiddenContent=null,h(this,p,O).call(this),this.btn=document.createElement("button"),this.btn.innerHTML=this.opts.global.text,this.btn.classList.add("widget-btn"),this.host.appendChild(this.btn),this.host.classList.add("clipped-content","visible-content"),this.mql=window.matchMedia(this.opts.global.matchMedia),!1===this.mql.matches&&this.hide(),this.mql.addEventListener("change",(function(e){t(d,b).call(d,e)})),this.onRemoveObserver=h(this,v,E).call(this),this.onRemoveObserver.connect(),this.btn.addEventListener("click",(function(){h(d,m,x).call(d)}))}return o(e,[{key:"show",value:function(){this.btn.classList.remove("hide"),this.host.classList.add("clipped-content")}},{key:"hide",value:function(){this.btn.classList.add("hide"),this.host.classList.remove("clipped-content")}}]),e}();function w(t){i("matcher",t.matches),t.matches?this.show():this.hide()}function k(){this.hiddenContent&&this.hiddenContent.forEach((function(t){t.style.display="block"})),this.hiddenContent=null}function O(){var t=this.opts.global.hideSelector;if("string"==typeof t&&t.length>0){var e=document.querySelectorAll(t);e.forEach((function(t){t.style.display="none"})),this.hiddenContent=e}}function x(){this.onRemoveObserver.disconnect(),this.mql.removeEventListener("change",t(this,b)),this.host.classList.remove("clipped-content"),this.host.removeChild(this.btn),h(this,f,k).call(this)}function E(){var t=new MutationObserver((function(t){var e,n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,r=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw r}}}}(t);try{var o=function(){var t=e.value;t.removedNodes&&t.removedNodes.length>0&&t.removedNodes.forEach((function(e){"BUTTON"===e.nodeName&&"widget-btn"===e.className&&(i("Button returned to layout"),t.target.appendChild(e))}))};for(n.s();!(e=n.n()).done;)o()}catch(t){n.e(t)}finally{n.f()}})),e=this.host;return{connect:function(){t&&t.observe(e,{childList:!0})},disconnect:function(){t&&t.disconnect()}}}new d(window.rmbOpts)}()})();
